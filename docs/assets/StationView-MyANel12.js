import{u as h,r as c,j as e}from"./index-D7y7nnVM.js";import{T as j}from"./Timer-CMoL8hHr.js";function p(){const{snapshot:t,timeLeft:r,actions:a,clientId:o}=h(),[n,m]=c.useState(""),[i,d]=c.useState(1),l=!!t.code;c.useEffect(()=>{if(l&&t.code){const s=localStorage.getItem("st:lastStationId");s&&d(Number(s))}},[l,t.code]);const x=async()=>{await a.stationJoin(n,i),localStorage.setItem("st:lastRoomCode",n),localStorage.setItem("st:lastStationId",String(i))};return e.jsxs("div",{className:"card space-y-4",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Station"}),l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:["Room: ",e.jsx("span",{className:"font-mono",children:t.code})]}),e.jsxs("div",{children:["Your ID: ",e.jsx("span",{className:"font-mono",children:o==null?void 0:o.slice(0,8)})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(j,{timeLeft:r??t.timeLeft})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>a.stationSetReady(!0),className:"bg-emerald-600 hover:bg-emerald-500",children:"Ready"}),e.jsx("button",{onClick:()=>a.stationSetReady(!1),className:"bg-slate-600 hover:bg-slate-500",children:"Not Ready"})]})]}):e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"Room Code"}),e.jsx("input",{value:n,onChange:s=>m(s.target.value.toUpperCase()),placeholder:"e.g. ABC123"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm",children:"Station ID"}),e.jsx("input",{type:"number",min:1,value:i,onChange:s=>d(Number(s.target.value))})]}),e.jsx("button",{onClick:x,children:"Join"})]}),e.jsx("div",{className:"text-xs opacity-60",children:"เมื่อเข้าร่วมแล้ว ระบบจะจำห้องและสถานีเดิมให้อัตโนมัติ"})]})}export{p as default};
